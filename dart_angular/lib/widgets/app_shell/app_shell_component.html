<div  #shell *ngIf="allowLoadShell">

    <!-- drawer background -->
    <div class="drawer-plane" #plane (click)="closeDrawers()">
    </div>

    <!-- mainContent -->
    <div class="main-content" id="mainContent">

        <!-- header -->
        <header class="bar" dir="rtl">

            <!-- muenu button -->
            <div class="main-menu">
                <div class="menu-btn push unselectable">
                    <img src="/assets/svg/icon_menu.svg">
                </div>
                <div class="menu-btn nopush unselectable">
                    <img src="/assets/svg/icon_menu.svg">
                </div>
            </div>

            <div class="header-title">
                <h3>{{titleBar}}</h3>
            </div>

            <div class="profile">
                <div *ngIf="isLogedIn" extractor (onExtract)="setupProfileDrawer(shell)"
                class="menu-btn unselectable profile-btn">
                    <img src="/assets/svg/icon_user_m.svg">
                </div>
                
                <div *ngIf="!isLogedIn" class="btn-sl" (click)="openlogin()">{{lang.getStr('loginRegister')}}</div>
            </div>

        </header>
        
        <div class="install_warning flex-row flex-center"
            *ngIf="!isInstalled">
            <div class="description">
                <p>{{lang.getStr('install_warning')}}</p>
            </div>
            <div class="button border-white" (click)="installApp()">
                {{lang.getStr('install')}}
            </div>
        </div>

        <!-- page -->
        <div class="content-body" *ngIf="isFirstLoggined">
            <router-outlet [routes]="pageRoutes.getAll()" ></router-outlet>
        </div>

        <footer style="height:100px"></footer>
    </div>
    <!-- end mainContent -->

    <!-- drawer_main menu -->
    <div extractor 
        (onExtract)="setupMenuDrawer(shell)"
        class="drawer" id="drawerMainMenu">

        <div>
            <a href="#">
            <img src="assets/imgs/logo_small.png" class="logo">
            </a>
        </div>

        <ul class="menu-group">
            <li *ngFor="let item of pageRoutes.getMainMenuItems()"
            class="d-menu-item w3-center"
            [routerLinkActive]="'active'">
                <a href="#" 
                    [routerLink]="item.url">
                    <img src="{{item.img_ref}}" alt="" class="drawer-icon">
                </a>
                <div class="item-divider"></div>
            </li>
        </ul>

        <translate-btn></translate-btn>
    </div>
    <!-- end drawer_main menu -->

    <!-- drawer profile menu -->
    <div *ngIf="isLogedIn" 
        class="drawer flex-column flex-center" id="drawerProfile">

        <div *ngIf="user != null" class="info text-center">
            <div class="avatar">
                <a href="/#/profile">
                    <img src="{{user.getImage()}}" alt="">
                </a>
            </div>
            {{user.fullname}}
        </div>

        <ul class="menu-group">
            <li *ngFor="let item of pageRoutes.getProfileMenuItems()"
            class="d-menu-item"
            [routerLinkActive]="'active'">
                <a [routerLink]="item.url" class='item-right-text'>
                    <img src="{{item.img_ref}}" alt="" class="drawer-icon">
                    <span class="drawer-title">{{item.title}}</span>
                </a>
                <div class="item-divider"></div>
            </li>
        </ul>

        <div class="btn-sl" (click)="logout()">{{lang.getStr('logout')}}</div>

    </div>
</div>

<!-- login form -->
<login-form *ngIf="!isLogedIn"></login-form>

