<div class="widget-container">

	<!-- header -->
	<div class="head">
		<div class="buttons" *ngIf="couldAdd">
			<div class="btn-sl" (click)="showForm('add')">add new</div>
		</div>

		<div class="query" *ngIf="couldQuery">
			<input 	[(ngModel)]="searchQuery" (change)="search()"
					class="input-text" type="text" placeholder='{"field":"val"}'>
			<!-- <lable>SEARCH</lable> -->
		</div>

		<div class="widget-title none-margine">
	        <h3>{{title}}</h3>
	        <!-- <div class="_line-title"></div> -->
	    </div>
	</div>

	<!-- table -->
	<div class="w3-responsive table">
		<table class="w3-table w3-centered w3-hoverable">
			<tr class="table-header">
				<th *ngFor="let field of fields; let i=index">
					{{field.toUpperCase()}}
				</th>
				<th>OPTION</th>
			</tr>

			<tr class="table-row" *ngFor="let item of list; let i=index">

				<td *ngFor="let field of fields; let i=index">
					{{item[field]}}
				</td>

				<td>
					<div class="btn-sl-x" *ngIf="couldUpdate" (click)="showForm('update', item)">edit</div>
					<a class="btn-sl-x" *ngFor="let lb of linkButtons" 
						href="{{lb.toUrl(item)}}">{{lb.title}}</a>
				</td>
			</tr>
		</table>
	</div>

	<!-- footer -->
	<div class="head">

		<div class="info">
			<span>page {{current_page}}</span>
			<span>of {{total_pages}}</span>
		</div>

		<div class="navigator flex-row" *ngIf="hasNavigator">
			<div class="btn-sl-x" (click)="navigate(1)">
				<img src="/assets/svg/icon_right-arrow.svg" alt="next">
			</div>

			<input class="input-text" type="text" value="{{current_page}}"
				#enteredPage (change)="setPage(enteredPage.value)">

			<div class="btn-sl-x" (click)="navigate(-1)">
				<img src="/assets/svg/icon_right-arrow.svg" alt="back" style="transform: rotate(180deg);">
			</div>
		</div>

	</div>
</div>

<div class="modal-base" extractor (onExtract)="getElement($event)">
	<div class="modal-card text-center text-normal">
		<div class="w3-row modal-content" style="direction: ltr;">
			
			<!-- add new -->
			<form *ngIf="editable != null">

				<div *ngFor="let field of fields; let i=index"
					class="w3-row w3-section group">
					
					<label>{{field}}: {{(!getActiveStatus(field) ? editable[field] : '')}}</label>

					<input 	*ngIf="getFiledType(field) == 'String' && getActiveStatus(field)"
							[(ngModel)]="editable[field]" 
                        	class="w3-input w3-round" type="text" placeholder="{{field}}">

                    <input 	*ngIf="getFiledType(field) == 'bool' && getActiveStatus(field)"
                    		[(ngModel)]="editable[field]"
                        	class="w3-radio" type="checkbox" placeholder="{{field}}">

                    <!-- simple string select -->
                    <select *ngIf="getFiledType(field) == 'List<String>' && getActiveStatus(field)"
                    		[(ngModel)]="editable[field]"
                    		class="w3-select">

						<option value="" selected="selected" hidden="hidden">Choose here</option>
                		<option *ngFor="let option of customFieldTypes[field]" 
                				[value]="option" selected>{{option}}</option>
                	</select>

                	<!-- select with deffrent value and lable -->
                    <select *ngIf="getFiledType(field) == 'List<SubField>' && getActiveStatus(field)"
                    		[(ngModel)]="editable[field]"
                    		class="w3-select">

						<option value="" selected="selected" hidden="hidden">Choose here</option>
                		<option *ngFor="let option of customFieldTypes[field]" 
                				[value]="option.value" selected>{{option.title}}</option>
                	</select>
				</div>

				<div class='btn-sl border-white' 
					*ngIf="formType == 'add' && couldAdd" (click)="addNewItem()">Add</div>

				<div class='btn-sl border-white' 
					*ngIf="formType == 'update' && couldUpdate" (click)="updateItem()">update</div>

				<div class='btn-sl border-white' 
					*ngIf="formType == 'update' && couldRemove" (click)="removeItem()">remove</div>
			</form>

			<!-- update -->

		</div>
	</div>
</div>